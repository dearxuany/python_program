# Python3 实现 NginX 日志定时切分备份
## 项目介绍
NginX 是现行阶段常用的 Web 服务器软件，根据其配置文件，可以选择将网站的访问记录和错误记录分别记录在 access.log 和 error.log 中。
不但可以给网站整体设置 log，还可细分到各个页面，给网站内的每一个页面设置一个专属的细分 log，以便日后的访问数据统计、分析、总结，为业务和网站系统的进一步改进提供数据支撑。
随着时间的推移和服务的发展，单位时间内访问网站的人数可能会逐渐增多，被细分出来的 log 数量也越来越多，容易造成单个 log 文件记录数据量大以及 log 文件数量多而杂的问题。
这些多而大的 log 文件们会占据系统大量的存储资源、降低系统的性能，如此同时，如果系统的出现问题导致这些 log 文件的丢失，公司就会损失大量的网站数据。</br>
</br>
为解决这一问题，可以根据网站的实际运行状况，制定一个合适的频率来对 Nginx 的 log 进行定时切分，让不同时间段的访问和错误数据分别记录到不同的 log 中，防止出现单个 log 文件过大、记录数据过多的问题。
与此同时，还需要将旧的 log 文件从 NginX 指定的 logs 目录定时移动到其他地方，防止 log 文件数量过多、占用系统存储空间过多、NginX性能下降以及 log 文件丢失的问题发生。</br>
</br>
本项目主要使用 Python3 自带的 os 模块和 time 模块，配合 linux 的 crontab 定时任务以及借助 Nginx 本身的一些特性，来实现对 Nginx logs 文件的定时自动切分和备份功能。</br>
本项目主要有以下几个特点：</br>
* 脚本程序每执行一次都会对指定的 Nginx log 文件进行一次切分，程序会将当前在 Nginx logs 目录中的 log 文件移动到指定的备份目录中。</br>
程序会自动检测备份目录中是否已存在当天对应的备份目录：</br>
如果该备份目录中没有当天的日志备份目录，则自动生成一个包含当天日期信息的目录，命名格式为“YYMMDD_backup_logs”；</br>
如果当天的备份目录已存在则不生成，继续使用该目录对当天 log 进行备份。</br>
对应备份 log 文件的处理：</br>
将要被备份的 log 文件会被改名为“YYMMDD_HH_原本名称”
